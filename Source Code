
<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Some Game</title>
		<style>
			canvas {
				padding: 0;
				margin: auto;
				display: block;
				border: 1px solid #d3d3d3;
				background-color: #f1f1f1;
			}
		</style>
	</head>
	<body onload="runGame()">
		<script>
			//MAKE NEW ENEMIES AND PICK-UPS
			//MAKE ENEMY HEALTH INCREASE OVER TIME
			//MAKE ENEMY AND PLAYER DEATH ANIMATIONS
			//MAKE MORE ANIMATIONS IN GENERAL
			//player variables
			var player;
			var points = 0;
			var score;
			var life;
			var lives = 3;
			var invulnerability = false;
			var isShooting = false;
			var playerBullets = [];
			var bulletDamage = 0.5;
			var shotFrame = 0;
			
			//enemy variables
			var basicEnemies = [];
			var basicBullets = [];
			var chargerEnemies = [];
			var lateralEnemies = [];
			var lateralTopBullets = [];
			var lateralBottomBullets = [];
			var bouncerEnemies = [];
			var snakeEnemies = [];
			var snakeCount;
			var snakeY;
			var blob1Enemies = [];
			var blobTop2Enemies = [];
			var blobBottom2Enemies = [];
			var blobTop3Enemies = [];
			var blobBottom3Enemies = [];
			
			//pick-up variables
			var pickUps = [];
			var gunType = 0;
			var novaNum = 0;
			var novaDelay;
			
			function runGame(){
				gameArea.start();
				player = new rectangleModel(20, 20, "#1a53ff", (gameArea.canvas.width/2)-10, (gameArea.canvas.height/2)-10);
				score = new rectangleModel("20px", "Impact", "black", 850, 50, "text");
				life = new rectangleModel("20px", "Impact", "black", 850, 25, "text");
			}

			var gameArea = {
				canvas : document.createElement("canvas"),
				start : function(){
					this.canvas.width = 1024;
					this.canvas.height = 576;
					this.context = this.canvas.getContext("2d");
					document.body.insertBefore(this.canvas, document.body.childNodes[0]);
					this.frameNum = 0;
					this.interval = setInterval(frameRefresh, 1000/60);
					window.addEventListener("keydown", function(e){
						gameArea.keys = (gameArea.keys || []);
						gameArea.keys[e.keyCode] = true;
					})
					window.addEventListener("keyup", function(e){
						gameArea.keys[e.keyCode] = false;
						if(e.keyCode==32){
							isShooting = false;
							shotFrame = 0;
						}
					})
				},
				clear : function(){
					this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
				}
			}
			
			function frameRefresh(){
				var x, y;
				score.text="Score: "+points;
				life.text="Lives: "+lives;
				gameArea.clear();
				gameArea.frameNum++;
				
				//player movement
				player.speedX = 0;
				player.speedY = 0;
				if(gameArea.keys && (gameArea.keys[37] || gameArea.keys[65])){
					player.speedX-=3.5;
					if(player.x<=1){
						player.speedX=0;
					}
				}
				if(gameArea.keys && (gameArea.keys[39] || gameArea.keys[68])){
					player.speedX+=3.5;
					if(player.x>=1003){
						player.speedX=0;
					}
				}
				if(gameArea.keys && (gameArea.keys[38] || gameArea.keys[87])){
					player.speedY-=3.5;	
					if(player.y<=2){
						player.speedY=0;
					}
				}
				if(gameArea.keys && (gameArea.keys[40] || gameArea.keys[83])){
					player.speedY+=3.5;
					if(player.y>=554){
						player.speedY=0;
					}
				}
				player.newPos();
				player.update();
				
				//player respawn
				if(invulnerability==true){
					if(player.frameNum>=0 && player.frameNum<60){
						player.frameNum++;
						player.color = "#B5C7FF";
					}else if(player.frameNum>=60 && player.frameNum<120){
						player.frameNum++;
						player.color = "#8DA9FF";
					}else if(player.frameNum>=120 && player.frameNum<180){
						player.frameNum++;
						player.color = "#7093FF";
					}else{
						player.frameNum = 0;
						player.color = "#1a53ff";
						invulnerability = false;
					}
				}
				
				//player shooting
				if(gameArea.keys && gameArea.keys[32] && invulnerability==false){
					isShooting = true;
					shotFrame++;
					if(gunType==1){
						if(isShooting && (shotFrame==1 || shotFrame%6==0)){
							x = player.x+player.width;
							y = player.y+8;
							playerBullets.push(new rectangleModel(36, 4, "#93FFF7", x, y));
						}
					}else if(gunType==2){
						if(isShooting && (shotFrame==1 || shotFrame%4==0)){
							x = player.x+player.width;
							randomY = randomInt(0, 14);
							y = player.y+randomY;
							playerBullets.push(new rectangleModel(12, 6, "#A8A8A8", x, y));
						}
					}else if(gunType==3){
						if(isShooting && (shotFrame==1 || shotFrame%20==0)){
							x = player.x+player.width;
							y = player.y-10;
							splitNum = 1;
							for(var i=0;i<5;i++){
								playerBullets.push(new rectangleModel(16, 8, "#F68A09", x, y));
								playerBullets[playerBullets.length-1].bulletTag = splitNum;
								splitNum++;
								y+=8;
							}
						}
					}else if(gunType==4){
						if(isShooting && (shotFrame==1 || shotFrame%20==0)){
							x = player.x+player.width;
							y = player.y+9;
							for(var i=0;i<8;i++){
								playerBullets.push(new rectangleModel(16, 2, "#CDCA28", x, y));
							}
						}
					}else if(gunType==5){
						if(isShooting && (shotFrame==1 || shotFrame%32==0)){
							novaNum = 0;
						}
						if(novaNum<8){
							if(novaNum==0){
								playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x+player.width, player.y+3));
								playerBullets[playerBullets.length-1].bulletTag = 6;
								novaDelay = gameArea.frameNum;
								novaNum++;
							}
							if(gameArea.frameNum==novaDelay+4){
								if(novaNum==1){
									playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x+player.width, player.y-14));
									playerBullets[playerBullets.length-1].bulletTag = 7;
									novaDelay = gameArea.frameNum;
									novaNum++;
								}else if(novaNum==2){
									playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x+3, player.y-14));
									playerBullets[playerBullets.length-1].bulletTag = 8;
									novaDelay = gameArea.frameNum;
									novaNum++;
								}else if(novaNum==3){
									playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x-14, player.y-14));
									playerBullets[playerBullets.length-1].bulletTag = 9;
									novaDelay = gameArea.frameNum;
									novaNum++;
								}else if(novaNum==4){
									playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x-14, player.y+3));
									playerBullets[playerBullets.length-1].bulletTag = 10;
									novaDelay = gameArea.frameNum;
									novaNum++;
								}else if(novaNum==5){
									playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x-14, player.y+player.height));
									playerBullets[playerBullets.length-1].bulletTag = 11;
									novaDelay = gameArea.frameNum;
									novaNum++;
								}else if(novaNum==6){
									playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x+3, player.y+player.height));
									playerBullets[playerBullets.length-1].bulletTag = 12;
									novaDelay = gameArea.frameNum;
									novaNum++;
								}else if(novaNum==7){
									playerBullets.push(new rectangleModel(14, 14, "#531DA7", player.x+player.width, player.y+player.height));
									playerBullets[playerBullets.length-1].bulletTag = 13;
									novaNum++;
								}
							}
						}
					}else{
						if(isShooting && (shotFrame==1 || shotFrame%15==0)){
							x = player.x+player.width;
							y = player.y+6;
							playerBullets.push(new rectangleModel(16, 8, "#009900", x, y));
						}
					}
				}
			
				//bullet movement
				for(var i=0;i<playerBullets.length;i++){
					if(gunType==1){
						playerBullets[i].x+=6;
					}else if(gunType==2){
						if(playerBullets[i].hasSpread==false){
							sign = randomInt(0, 1);
							if(sign==0){
								playerBullets[i].spread = -1*Math.random();
							}else{
								playerBullets[i].spread = Math.random();
							}
							playerBullets[i].hasSpread = true;
						}
						playerBullets[i].x+=5;
						playerBullets[i].y+=playerBullets[i].spread;
					}else if(gunType==3){
						playerBullets[i].x+=6;
						if(playerBullets[i].bulletTag==1){
							playerBullets[i].y-=2;
						}
						if(playerBullets[i].bulletTag==2){
							playerBullets[i].y-=1;
						}
						if(playerBullets[i].bulletTag==4){
							playerBullets[i].y+=1;
						}
						if(playerBullets[i].bulletTag==5){
							playerBullets[i].y+=2;
						}
					}else if(gunType==4){
						if(playerBullets[i].hasSpread==false){
							sign = randomInt(0, 1);
							if(sign==0){
								playerBullets[i].spread = -1*randomFloat(0, 3.5);
							}else{
								playerBullets[i].spread = randomFloat(0, 3.5);
							}
							playerBullets[i].hasSpread = true;
						}
						playerBullets[i].x+=30;
						playerBullets[i].y+=playerBullets[i].spread;
					}else if(gunType==5){
						if(playerBullets[i].frameNum%120==0){
							if(playerBullets[i].bulletTag==6){
								playerBullets[i].x+=4;
							}else if(playerBullets[i].bulletTag==7){
								playerBullets[i].x+=4;
								playerBullets[i].y-=4;
							}else if(playerBullets[i].bulletTag==8){
								playerBullets[i].y-=4;
							}else if(playerBullets[i].bulletTag==9){
								playerBullets[i].x-=4;
								playerBullets[i].y-=4;
							}else if(playerBullets[i].bulletTag==10){
								playerBullets[i].x-=4;
							}else if(playerBullets[i].bulletTag==11){
								playerBullets[i].x-=4;
								playerBullets[i].y+=4;
							}else if(playerBullets[i].bulletTag==12){
								playerBullets[i].y+=4;
							}else if(playerBullets[i].bulletTag==13){
								playerBullets[i].x+=4;
								playerBullets[i].y+=4;
							}else if(playerBullets[i].bulletTag!=6 && 
									 playerBullets[i].bulletTag!=7 && 
									 playerBullets[i].bulletTag!=8 && 
									 playerBullets[i].bulletTag!=9 && 
									 playerBullets[i].bulletTag!=10 && 
									 playerBullets[i].bulletTag!=11 && 
									 playerBullets[i].bulletTag!=12){
								playerBullets[i].x+=6;
							}
						}
					}else{
						playerBullets[i].x+=5;
					}
					playerBullets[i].update();
				}
				bulletOut();
				
				//basic spawning and movement
				if(gameArea.frameNum==1 || frameInterval(60)){	
					x = gameArea.canvas.width;
					y = randomInt(0, 556);
					basicEnemies.push(new rectangleModel(20, 20, "#ff0000", x, y));
				}
				for(var i=0;i<basicEnemies.length;i++){
					basicEnemies[i].x-=3;
					basicEnemies[i].update();
					basicEnemies[i].frameNum++;
				}
				
				//basic shooting
				for(var i=0;i<basicEnemies.length;i++){
					if(basicEnemies[i].frameNum%75==0){
						x = basicEnemies[i].x-10;
						y = basicEnemies[i].y+6;
						basicBullets.push(new rectangleModel(16, 8, "#ff00ff", x, y));
					}
				}
				for(var i=0;i<basicBullets.length;i++){
					basicBullets[i].x-=4;
					basicBullets[i].update();
				}
				basicOut();
				basicBulletOut();
				basicBulletCollision();
				playerBasicBulletCollision();
				playerBasicCollision();
				
				//charger spawning and movement
				if(gameArea.frameNum>=1800){
					if(frameInterval(270)){
						x = gameArea.canvas.width;
						y = randomInt(0, 551);
						chargerEnemies.push(new rectangleModel(40, 25, "#00b3b3", x, y));
					}
				}
				for(var i=0;i<chargerEnemies.length;i++){
					if(chargerEnemies[i].frameNum<20){
						chargerEnemies[i].x-=5;
						chargerEnemies[i].update();
					}else if(chargerEnemies[i].frameNum>=20 && chargerEnemies[i].frameNum<50){
						chargerEnemies[i].x++;
						chargerEnemies[i].update();
					}else{
						chargerEnemies[i].x-=50;
						chargerEnemies[i].update();
					}
					chargerEnemies[i].frameNum++;
				}
				chargerOut();
				chargerBulletCollision();
				playerChargerCollision();
				
				//lateral spawning and movement
				if(gameArea.frameNum>=3600){
					if(frameInterval(240)){
						x = gameArea.canvas.width;
						y = randomInt(0, 551);
						lateralEnemies.push(new rectangleModel(25, 25, "#006600", x, y));
					}
				}
				for(var i=0;i<lateralEnemies.length;i++){
					lateralEnemies[i].x-=4;
					lateralEnemies[i].update();
					lateralEnemies[i].frameNum++;
				}
				
				//lateral shooting
				for(var i=0;i<lateralEnemies.length;i++){
					if(lateralEnemies[i].frameNum%60==0){
						x = lateralEnemies[i].x+7;
						y1 = lateralEnemies[i].y-22;
						y2 = lateralEnemies[i].y+25;
						lateralTopBullets.push(new rectangleModel(11, 22, "#2DC173", x, y1));
						lateralBottomBullets.push(new rectangleModel(11, 22, "#2DC173", x, y2));
					}
				}
				for(var i=0;i<lateralTopBullets.length;i++){
					lateralTopBullets[i].y-=4;
					lateralTopBullets[i].update();
				}
				for(var i=0;i<lateralBottomBullets.length;i++){
					lateralBottomBullets[i].y+=4;
					lateralBottomBullets[i].update();
				}
				lateralOut();
				lateralTopBulletOut();
				lateralBottomBulletOut();
				lateralBulletCollision();
				playerLateralTopBulletCollision();
				playerLateralBottomBulletCollision();
				playerLateralCollision();
				
				//bouncer spawning and movement
				if(gameArea.frameNum>=5400){
					if(frameInterval(300)){
						x = randomInt(0, 994);
						y = gameArea.canvas.height;
						bouncerEnemies.push(new rectangleModel(30, 50, "#CFD37B", x, y));
					}
				}
				for(var i=0;i<bouncerEnemies.length;i++){
					x = bouncerEnemies[i].frameNum;
					speed = (-1/2050)*(x+120)*(x-120);
					bouncerEnemies[i].y-=speed;
					bouncerEnemies[i].update();
					bouncerEnemies[i].frameNum++;
				}
				bouncerOut();
				bouncerBulletCollision();
				playerBouncerCollision();
				
				//snake spawning and movement
				if(gameArea.frameNum>=7200){
					x = gameArea.canvas.width;
					spawnpoint = randomInt(0, 506);
					if(frameInterval(360)){
						snakeY = spawnpoint;
						snakeEnemies.push(new rectangleModel(20, 20, "#D10F0F", x, snakeY));
						snakeDelay = gameArea.frameNum;
						snakeCount = 0;
					}else{
						if(snakeCount<14){
							if(gameArea.frameNum==snakeDelay+5){
								snakeEnemies.push(new rectangleModel(20, 20, "#29AF35", x, snakeY));
								snakeDelay = gameArea.frameNum;
								snakeCount++;
							}
						}
					}
				}
				for(var i=0;i<snakeEnemies.length;i++){
					snakeEnemies[i].frameNum++;
					if(snakeEnemies[i].frameNum%10==0){
						snakeEnemies[i].snakeCycle++;
						if(snakeEnemies[i].snakeCycle==4){
							snakeEnemies[i].snakeCycle = 0;
						}
					}
					if(snakeEnemies[i].frameNum%5==0){
						if(snakeEnemies[i].snakeCycle==0){
							snakeEnemies[i].x-=25;
						}else if(snakeEnemies[i].snakeCycle==1){
							snakeEnemies[i].y+=25;
						}else if(snakeEnemies[i].snakeCycle==2){
							snakeEnemies[i].x-=25;
						}else if(snakeEnemies[i].snakeCycle==3){
							snakeEnemies[i].y-=25;
						}
					}
					snakeEnemies[i].update();
				}
				snakeOut();
				snakeBulletCollision();
				playerSnakeCollision();
				
				//blob spawning and movement
				if(gameArea.frameNum>=9000){
					if(frameInterval(240)){
						x = gameArea.canvas.width;
						y = randomInt(0, 544);
						blob1Enemies.push(new rectangleModel(40, 40, "#A6E1A1", x, y));
					}
				}
				for(var i=0;i<blob1Enemies.length;i++){
					blob1Enemies[i].x-=2;
					blob1Enemies[i].update();
					blob1Enemies[i].frameNum++;
				}
				for(var i=0;i<blobTop2Enemies.length;i++){
					blobTop2Enemies[i].frameNum++;
					if(blobTop2Enemies[i].frameNum<11){
						blobTop2Enemies[i].y-=5;
						blobTop2Enemies[i].x-=2;
					}else{
						blobTop2Enemies[i].x-=4;
					}
					blobTop2Enemies[i].update();
				}
				for(var i=0;i<blobBottom2Enemies.length;i++){
					blobBottom2Enemies[i].frameNum++;
					if(blobBottom2Enemies[i].frameNum<11){
						blobBottom2Enemies[i].y+=5;
						blobBottom2Enemies[i].x-=2;
					}else{
						blobBottom2Enemies[i].x-=4;
					}
					blobBottom2Enemies[i].update();
				}
				for(var i=0;i<blobTop3Enemies.length;i++){
					blobTop3Enemies[i].frameNum++;
					if(blobTop3Enemies[i].frameNum<11){
						blobTop3Enemies[i].y-=3;
						blobTop3Enemies[i].x-=4;
					}else{
						blobTop3Enemies[i].x-=8;
					}
					blobTop3Enemies[i].update();
				}
				for(var i=0;i<blobBottom3Enemies.length;i++){
					blobBottom3Enemies[i].frameNum++;
					if(blobBottom3Enemies[i].frameNum<11){
						blobBottom3Enemies[i].y+=3;
						blobBottom3Enemies[i].x-=4;
					}else{
						blobBottom3Enemies[i].x-=8;
					}
					blobBottom3Enemies[i].update();
				}
				blobOut();
				blobBulletCollision();
				playerBlobCollision();
				
				//pick-up spawning and movement
				if(gameArea.frameNum%3600==0){
					weaponSpawn = randomInt(1,5);//there should be 7 when all weapons are implemented
					x = gameArea.canvas.width+9;
					y = randomInt(9, 557);
					if(weaponSpawn==1){
						pickUps.push(new circleModel(x, y, 9, 0, 2*Math.PI, "#93FFF7", "lazer"));
					}
					if(weaponSpawn==2){
						pickUps.push(new circleModel(x, y, 9, 0, 2*Math.PI, "#A8A8A8", "machine gun"));
					}
					if(weaponSpawn==3){
						pickUps.push(new circleModel(x, y, 9, 0, 2*Math.PI, "#F68A09", "split"));
					}
					if(weaponSpawn==4){
						pickUps.push(new circleModel(x, y, 9, 0, 2*Math.PI, "#CDCA28", "shotgun"));
					}
					if(weaponSpawn==5){
						pickUps.push(new circleModel(x, y, 9, 0, 2*Math.PI, "#531DA7", "nova"));
					}
				}
				for(var i=0;i<pickUps.length;i++){
					pickUps[i].x-=2;
					pickUps[i].frameNum++;
					if(pickUps[i].type!=null){
						if(pickUps[i].frameNum%20==0){
							pickUps[i].color = "#DEFF0F";
						}else{
							if(pickUps[i].type=="lazer"){
								pickUps[i].color = "#93FFF7";
							}
							if(pickUps[i].type=="machine gun"){
								pickUps[i].color = "#A8A8A8";
							}
							if(pickUps[i].type=="split"){
								pickUps[i].color = "#F68A09";
							}
							if(pickUps[i].type=="shotgun"){
								pickUps[i].color = "#CDCA28";
							}
							if(pickUps[i].type=="nova"){
								pickUps[i].color = "#531DA7";
							}
						}
					}
					pickUps[i].update();
				}
				getPickUp();
				pickUpOut();
				
				score.update();
				life.update();
			}
			
			function death(){
				player.health--;
				lives--;
				if(player.health<=-3){
					player.x=-1000000;
					player.y=-1000000;
				}else{
					player.x = (gameArea.canvas.width/2)-10;
					player.y = (gameArea.canvas.height/2)-10;
					invulnerability = true;
				}
			}
			
			function bulletOut(){
				for(var i=0;i<playerBullets.length;i++){
					if(playerBullets[i].x>1024 || playerBullets[i].x<-50 || playerBullets[i].y>576 || playerBullets[i].y<-50){
						playerBullets.splice(i, 1);
					}
				}
			}
			
			//enemy functions
			function basicOut(){
				for(var i=0;i<basicEnemies.length;i++){
					if(basicEnemies[i].x+20<0){
						basicEnemies.splice(i, 1);
					}
				}
			}
			
			function basicBulletOut(){
				for(var i=0;i<basicBullets.length;i++){
					if(basicBullets[i].x+16<0){
						basicBullets.splice(i, 1);
					}
				}
			}
			
			function basicBulletCollision(){
				for(var i=playerBullets.length-1;i>=0;i--){
					for(var k=basicEnemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], basicEnemies[k])&& invulnerability==false){
							basicEnemies[k].health-=bulletDamage;
							if(basicEnemies[k].health<=-1){
								basicEnemies.splice(k, 1);
								points+=10;
							}
							playerBullets.splice(i, 1);
						}
					}
				}
			}
			
			function playerBasicBulletCollision(){
				for(var i=0;i<basicBullets.length;i++){
					if(rectRectCollision(player, basicBullets[i])&& invulnerability==false){
						basicBullets.splice(i, 1);
						death();
					}
				}
			}
			
			function playerBasicCollision(){
				for(var i=0;i<basicEnemies.length;i++){
					if(rectRectCollision(player, basicEnemies[i])&& invulnerability==false){
						death();
					}
				}
			}
			
			function chargerOut(){
				for(var i=0;i<chargerEnemies.length;i++){
					if(chargerEnemies[i].x+40<0){
						chargerEnemies.splice(i, 1);
					}
				}
			}
			
			function chargerBulletCollision(){
				for(var i=playerBullets.length-1;i>=0;i--){
					for(var k=chargerEnemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], chargerEnemies[k])&& invulnerability==false){
							chargerEnemies[k].health-=bulletDamage;
							if(chargerEnemies[k].health<=-2){
								chargerEnemies.splice(k, 1);
								points+=20;
							}
							playerBullets.splice(i, 1);
						}
					}
				}
			}
			
			function playerChargerCollision(){
				for(var i=0;i<chargerEnemies.length;i++){
					if(rectRectCollision(player, chargerEnemies[i])&& invulnerability==false){
						death();
					}
				}
			}
			
			function lateralOut(){
				for(var i=0;i<lateralEnemies.length;i++){
					if(lateralEnemies[i].x+25<0){
						lateralEnemies.splice(i, 1);
					}
				}
			}
			
			function lateralTopBulletOut(){
				for(var i=0;i<lateralTopBullets.length;i++){
					if(lateralTopBullets[i].y+22<0){
						lateralTopBullets.splice(i, 1);
					}
				}
			}
			
			function lateralBottomBulletOut(){
				for(var i=0;i<lateralBottomBullets.length;i++){
					if(lateralBottomBullets[i].y>576){
						lateralBottomBullets.splice(i, 1);
					}
				}
			}
			
			function lateralBulletCollision(){
				for(var i=playerBullets.length-1;i>=0;i--){
					for(var k=lateralEnemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], lateralEnemies[k])&& invulnerability==false){
							lateralEnemies[k].health-=bulletDamage;
							if(lateralEnemies[k].health<=-3){
								lateralEnemies.splice(k, 1);
								points+=30;
							}
							playerBullets.splice(i, 1);
						}
					}
				}
			}
			
			function playerLateralTopBulletCollision(){
				for(var i=0;i<lateralTopBullets.length;i++){
					if(rectRectCollision(player, lateralTopBullets[i])&& invulnerability==false){
						lateralTopBullets.splice(i, 1);
						death();
					}
				}
			}
			
			function playerLateralBottomBulletCollision(){
				for(var i=0;i<lateralBottomBullets.length;i++){
					if(rectRectCollision(player, lateralBottomBullets[i])&& invulnerability==false){
						lateralBottomBullets.splice(i, 1);
						death();
					}
				}
			}
			
			function playerLateralCollision(){
				for(var i=0;i<lateralEnemies.length;i++){
					if(rectRectCollision(player, lateralEnemies[i])&& invulnerability==false){	
						death();
					}
				}
			}
			
			function bouncerOut(){
				for(var i=0;i<bouncerEnemies.length;i++){
					if(bouncerEnemies[i].y>576){
						bouncerEnemies.splice(i, 1);
					}
				}
			}
			
			function bouncerBulletCollision(){
				for(var i=playerBullets.length-1;i>=0;i--){
					for(var k=bouncerEnemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], bouncerEnemies[k])&& invulnerability==false){
							bouncerEnemies[k].health-=bulletDamage;
							if(bouncerEnemies[k].health<=-4){
								bouncerEnemies.splice(k, 1);
								points+=40;
							}
							playerBullets.splice(i, 1);
						}
					}
				}
			}
			
			function playerBouncerCollision(){
				for(var i=0;i<bouncerEnemies.length;i++){
					if(rectRectCollision(player, bouncerEnemies[i])&& invulnerability==false){
						death();
					}
				}
			}
			
			function snakeOut(){
				for(var i=0;i<snakeEnemies.length;i++){
					if(snakeEnemies[i].x+20<0){
						snakeEnemies.splice(i, 1);
					}
				}
			}
			
			function snakeBulletCollision(){
				for(var i=playerBullets.length-1;i>=0;i--){
					for(var k=snakeEnemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], snakeEnemies[k])&& invulnerability==false){
							if(snakeEnemies[k].health<=2){
								snakeEnemies.splice(k, 1);
								points+=20;
							}
							playerBullets.splice(i, 1);
						}
					}
				}
			}
			
			function playerSnakeCollision(){
				for(var i=0;i<snakeEnemies.length;i++){
					if(rectRectCollision(player, snakeEnemies[i])&& invulnerability==false){
						death();
					}
				}
			}
			
			function blobOut(){
				for(var i=0;i<blob1Enemies.length;i++){
					if(blob1Enemies[i].x+40<0){
						blob1Enemies.splice(i, 1);
					}
				}
				for(var i=0;i<blobTop2Enemies.length;i++){
					if(blobTop2Enemies[i].x+28<0){
						blobTop2Enemies.splice(i, 1);
					}
				}
				for(var i=0;i<blobBottom2Enemies.length;i++){
					if(blobBottom2Enemies[i].x+28<0){
						blobBottom2Enemies.splice(i, 1);
					}
				}
				for(var i=0;i<blobTop3Enemies.length;i++){
					if(blobTop3Enemies[i].x+20<0){
						blobTop3Enemies.splice(i, 1);
					}
				}
				for(var i=0;i<blobBottom3Enemies.length;i++){
					if(blobBottom3Enemies[i].x+20<0){
						blobBottom3Enemies.splice(i, 1);
					}
				}
			}
			
			function blobBulletCollision(){
				for(var i=playerBullets.length-1;i>=0;i--){
					for(var k=blob1Enemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], blob1Enemies[k])&& invulnerability==false){
							blob1Enemies[k].health-=bulletDamage;
							if(blob1Enemies[k].health<=-4){
								points+=40;
								x = blob1Enemies[k].x+6;
								y = blob1Enemies[k].y+6;
								blobTop2Enemies.push(new rectangleModel(28, 28, "#A6E1A1", x, y));
								blobBottom2Enemies.push(new rectangleModel(28, 28, "#A6E1A1", x, y));
								blob1Enemies.splice(k, 1);
							}
							playerBullets.splice(i, 1);
						}
					}
					for(var k=blobTop2Enemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], blobTop2Enemies[k])&& invulnerability==false){
							blobTop2Enemies[k].health-=bulletDamage;
							if(blobTop2Enemies[k].health<=-2){
								points+=20;
								x = blobTop2Enemies[k].x+4;
								y = blobTop2Enemies[k].y+4;
								blobTop3Enemies.push(new rectangleModel(20, 20, "#A6E1A1", x, y));
								blobBottom3Enemies.push(new rectangleModel(20, 20, "#A6E1A1", x, y));
								blobTop2Enemies.splice(k, 1);
							}
							playerBullets.splice(i, 1);
						}
					}
					for(var k=blobBottom2Enemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], blobBottom2Enemies[k])&& invulnerability==false){
							blobBottom2Enemies[k].health-=bulletDamage;
							if(blobBottom2Enemies[k].health<=-2){
								points+=20;
								x = blobBottom2Enemies[k].x+4;
								y = blobBottom2Enemies[k].y+4;
								blobTop3Enemies.push(new rectangleModel(20, 20, "#A6E1A1", x, y));
								blobBottom3Enemies.push(new rectangleModel(20, 20, "#A6E1A1", x, y));
								blobBottom2Enemies.splice(k, 1);
							}
							playerBullets.splice(i, 1);
						}
					}
					for(var k=blobTop3Enemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], blobTop3Enemies[k])&& invulnerability==false){
							blobTop3Enemies[k].health-=bulletDamage;
							if(blobTop3Enemies[k].health<=-1){
								blobTop3Enemies.splice(k, 1);
								points+=10;
							}
							playerBullets.splice(i, 1);
						}
					}
					for(var k=blobBottom3Enemies.length-1;k>=0;k--){
						if(rectRectCollision(playerBullets[i], blobBottom3Enemies[k])&& invulnerability==false){
							blobBottom3Enemies[k].health-=bulletDamage;
							if(blobBottom3Enemies[k].health<=-1){
								blobBottom3Enemies.splice(k, 1);
								points+=10;
							}
							playerBullets.splice(i, 1);
						}
					}
				}
			}
			
			function playerBlobCollision(){
				for(var i=0;i<blob1Enemies.length;i++){
					if(rectRectCollision(player, blob1Enemies[i])&& invulnerability==false){
						death();
					}
				}
				for(var i=0;i<blobTop2Enemies.length;i++){
					if(rectRectCollision(player, blobTop2Enemies[i])&& invulnerability==false){
						death();
					}
				}
				for(var i=0;i<blobBottom2Enemies.length;i++){
					if(rectRectCollision(player, blobBottom2Enemies[i])&& invulnerability==false){
						death();
					}
				}
				for(var i=0;i<blobTop3Enemies.length;i++){
					if(rectRectCollision(player, blobTop3Enemies[i])&& invulnerability==false){
						death();
					}
				}
				for(var i=0;i<blobBottom3Enemies.length;i++){
					if(rectRectCollision(player, blobBottom3Enemies[i])&& invulnerability==false){
						death();
					}
				}
			}
			
			//pick-up functions
			function getPickUp(){
				for(var i=0;i<pickUps.length;i++){
					if(rectCircCollision(player, pickUps[i])){
						if(pickUps[i].type=="lazer"){
							gunType = 1;
							bulletDamage = 1.5;
						}
						if(pickUps[i].type=="machine gun"){
							gunType = 2;
							bulletDamage = 0.9;
						}
						if(pickUps[i].type=="split"){
							gunType = 3;
							bulletDamage = 0.6;
						}
						if(pickUps[i].type=="shotgun"){
							gunType = 4;
							bulletDamage = 1;
						}
						if(pickUps[i].type=="nova"){
							gunType = 5;
							bulletDamage = 1;
						}
						pickUps.splice(i, 1);
					}
				}
			}
			
			function pickUpOut(){
				for(var i=0;i<pickUps.length;i++){
					if(pickUps[i].x+9<0){
						pickUps.splice(i, 1);
					}
				}
			}
			
			//base functions
			function rectangleModel(width, height, color, x, y, type){
				this.type = type;
				this.width = width;
				this.height = height;
				this.x = x;
				this.y = y; 
				this.color = color;
				this.speedX = 0;
				this.speedY = 0;
				this.frameNum = 0;
				this.health = 0;
				this.snakeCycle = 0;
				this.hasSpread = false;
				this.spread = 0;
				this.bulletTag = 0;
				this.update = function(){
					ctx = gameArea.context;
					if(this.type=="text"){
						ctx.font = this.width + " " + this.height;
						ctx.fillStyle = this.color;
						ctx.fillText(this.text, this.x, this.y);
					}else{
						ctx.fillStyle = this.color;
						ctx.fillRect(this.x, this.y, this.width, this.height);
					}
				}
				this.newPos = function(){
					this.x += this.speedX;
					this.y += this.speedY;
				}
			}
			
			function circleModel(x, y, r, startAngle, endAngle, color, type){
				this.x = x;
				this.y = y;
				this.r = r;
				this.startAngle = startAngle;
				this.endAngle = endAngle;
				this.color = color;
				this.type = type;
				this.frameNum = 0;
				this.update = function(){
					ctx = gameArea.context;
					ctx.beginPath();
					ctx.arc(this.x, this.y, this.r, this.startAngle, this.endAngle);
					ctx.fillStyle = this.color;
					ctx.fill();
					ctx.lineWidth = 1;
					ctx.strokeStyle = this.color;
					ctx.stroke();
				}
			}
			
			function rectRectCollision(rect1, rect2){
				if(rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.y + rect1.height > rect2.y){
					return true;
				}else{
					return false;
				}
			}
			
			function rectCircCollision(rect, circle){
				distX = Math.abs(circle.x-(rect.x+rect.width/2));
				distY = Math.abs(circle.y-(rect.y+rect.width/2));
				if(distX>((rect.width/2)+circle.r)){
					return false; 
				}
				if(distY>((rect.height/2)+circle.r)){
					return false;
				}
				if(distX<=((rect.width/2)+circle.r)){ 
					return true; 
				} 
				if(distY<=((rect.height/2)+circle.r)) { 
					return true; 
				}
				diagX=distX-rect.width/2;
				diagY=distY-rect.height/2;
				return (diagX*diagX+diagY*diagY<=(circle.r*circle.r));
			}
			
			function frameInterval(a){
				if(gameArea.frameNum%a==0){
					return true;
				}else{
					return false;
				}
			}
			
			function randomInt(min, max){
				return Math.floor(Math.random() * (max - min + 1) ) + min;
			}
			
			function randomFloat(min, max) {
				return Math.random() * (max - min) + min;
			}
		</script>
	</body>
</html>
